# Summary: Central Configuration File for Helm Chart
# Description:
# This file serves as the central configuration point for the entire Helm chart.
# It defines all key parameters—such as image, ports, secrets, resources, storage, and autoscaling—
# used across all templates. Helm dynamically injects these values into your manifests at deployment time,
# making the setup modular, reusable, and easy to maintain.

# Flask Application Configuration
app:
  name: shviki-app                       # Logical name for the Flask Deployment
  image: "alon2810/shvikifitness:fcd83b6" # Docker image for your Flask app
  replicas: 1                            # Number of Flask pods (can scale via HPA)
  port: 5000                             # Port Flask listens on inside the container

  # Resource allocations for the Flask container
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 300m
      memory: 256Mi

# MySQL Database Configuration
mysql:
  image: "mysql:8.0"
  database: "shviki_db"
  user: "shviki"
  port: 3306
  storage:
    size: 1Gi
    class: "gp3-ebs"
  secretName: shviki-mysql-secret
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

# Service Configuration
service:
  type: LoadBalancer
  port: 80
  
# Autoscaling Configuration
autoscaling:
  enabled: true
  minReplicas: 1
  maxReplicas: 3
  targetCPUUtilizationPercentage: 70