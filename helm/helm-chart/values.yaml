# Summary: Central Configuration File for Helm Chart
# Description:
# This file serves as the central configuration point for the entire Helm chart.
# It defines all key parameters—such as image, port, secrets, and storage—used across your templates.
# Helm dynamically injects these values into your manifests at deployment time,
# making the setup modular, reusable, and easy to maintain.

# Flask Application Configuration
app:
  name: shviki-app                      # Logical name for the Flask Deployment
  image: "alon2810/shvikifitness:latest" # Docker image for your app
  replicas: 1                           # Number of pods to run (can scale up)
  port: 5000                            # Port Flask listens on inside the container

# MySQL Database Configuration
mysql:
  image: "mysql:8.0"                    # MySQL container image
  database: "shviki_db"                 # Default database name
  user: "shviki"                        # Database username
  port: 3306                            # MySQL port inside the pod

  storage:                              # Persistent volume settings
    size: 1Gi                           # Volume size for MySQL data
    class: "standard"                   # Storage class used (Minikube default)
  
  secretName: shviki-mysql-secret       # Name of the Kubernetes Secret with MySQL credentials

# Service Configuration
service:
  type: NodePort                        # Expose Flask externally (NodePort for Minikube)
  port: 80                              # Internal cluster port for HTTP traffic
  nodePort: 30080                       # External port mapped to host machine

# Secret Values (Injected into Kubernetes Secret)
secret:
  mysql:
    rootPassword: "root123"             # MySQL root password
    userPassword: "shviki123"           # MySQL user password

# Autoscaling Configuration
autoscaling:
  enabled: true                         # Enables the HPA if set to true
  minReplicas: 1                        # Minimum number of Flask pods
  maxReplicas: 3                        # Maximum number of Flask pods
  targetCPUUtilizationPercentage: 70    # Target CPU utilization threshold for scaling
