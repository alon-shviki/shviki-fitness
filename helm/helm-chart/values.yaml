# Summary: Central Configuration File for Helm Chart
# Description:
# Defines all configurable settings for the ShvikiFitness Helm chart.
# Parameters here control image versions, replicas, resources, database settings,
# service exposure, storage, and autoscaling. These values are injected into all
# templates to keep the deployment modular and maintainable.

# -----------------------------
# Flask Application Parameters
# -----------------------------
app:
  name: shviki-app                                 # Logical name for Flask Deployment
  image: "alon2810/shvikifitness:0805402"          # Flask Docker image
  replicas: 1                                       # Default replica count (HPA may override)
  port: 5000                                        # Internal container port

  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 300m
      memory: 256Mi

# -----------------------------
# MySQL Database Configuration
# -----------------------------
mysql:
  image: "mysql:8.0"                                # MySQL container image
  database: "shviki_db"                             # Default database name
  user: "shviki"                                    # Application DB user
  port: 3306                                        # MySQL listening port

  storage:
    size: 1Gi                                       # PVC requested storage size
    class: "gp3-ebs"                                # StorageClass to use for PVC

  secretName: shviki-mysql-secret                   # Secret holding MySQL credentials

  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

# -----------------------------
# Service Exposure
# -----------------------------
service:
  type: LoadBalancer                                # Can be ClusterIP, NodePort, or LoadBalancer
  port: 80                                          # External service port

# -----------------------------
# Autoscaling (HPA) Settings
# -----------------------------
autoscaling:
  enabled: true                                     # Enable or disable HPA
  minReplicas: 1
  maxReplicas: 3
  targetCPUUtilizationPercentage: 70                # CPU threshold for scaling
